<!DOCTYPE html>
<meta http-equiv="Content-Language" content="pt-br">

<html>
    <link rel="stylesheet" href="style.css" />
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <body class="mainBody">

        <header 
            id="nome" 
            onmouseover="changeName('full')" 
            onmouseout="changeName('default')"
            class="header">
            jgdml
        </header>
    

        <div id="about" class="section">

            <h1 class="sectionTitle">
                Sobre
            </h1>
            
            <div class="sectionContainer">
                <p class="normalText">
                    Brasileiro 
                    <br><br>
                    Estudante de Engenharia de Software
                    <br><br>
                    Experiência Profissional:
                    <br><br>
                    Email:
                </p>

                <p class="normalText">
                    20 anos
                    <br><br>
                    IFPR - Instituto Federal do Paraná
                    <br><br>
                    Estagiário de Informática
                    <br><br>
                    jgdml2801@gmail.com 
                </p>
            </div>

        </div>


        <div id="repos" class="section">

            <h1 class="sectionTitle">
                Repositórios
            </h1>

            <div id="reposContainer" class="sectionContainer">
            </div>
        </div>


        <div id="langs" class="section">
            <h1 class="sectionTitle">
                Linguagens ja Usadas
            </h1>

            <div id="langList" class="langContainer">
            </div>
        </div>


    </body>
    


    <script>

        function changeName (changeTo){
            // localizar elemento nome
            var nameHeader = document.getElementById("nome")

            // trocar valor do elemento
            if (changeTo == "full"){
                nameHeader.innerHTML = "João Gabriel Durante Marques de Lima"
            }
            else {
                nameHeader.innerHTML = "jgdml"
            }
        }


        function createRepoCard(repoInfo, contributorNumber){

            // localizar elemento da seçao de repositorio
            var repoSection = document.getElementById("reposContainer")


            var card = document.createElement("div")
            var cardBody = document.createElement("div")
            var title = document.createElement("h5")
            var text = document.createElement("p")
            var button = document.createElement("a")
            
            card.className = "card"
            card.style="width: 18rem;"
            
            cardBody.className = "card-body"
            title.className = "card-title"
            text.className = "card-text"
            button.className = "btn btn-primary"

            // transformar em date para formatar
            var dt = new Date(repoInfo.updated_at)
            var dateText = "Ultimo commit em "+ (dt.getDate() +"/"+(dt.getMonth() == 0 ? 1 : dt.getMonth()) +"/"+dt.getFullYear())
            
            
            title.innerHTML = repoInfo.name
            text.innerHTML = dateText
            button.innerHTML = "Ir para repositório"
            button.href = repoInfo.html_url
            button.target = "_blank"
            button.style = "background-color: var(--highlightColor)"

            card.appendChild(cardBody)
            cardBody.appendChild(title)
            cardBody.appendChild(text)
            cardBody.appendChild(button)


            // // criar texto nome do repositorio
            // var nameText = document.createElement("text");
            // nameText.innerHTML = repoInfo.name


            // var contributorText = document.createElement("text");
            // contributorText.innerHTML = contributorNumber+" Contribuidores"

        
            // // criar texto ultimo commit do repositorio
            // var updatedText = document.createElement("text")
            // // transformar em date para formatar
            // var dt = new Date(repoInfo.updated_at)
            // updatedText.innerHTML = "Ultimo commit em "+ (dt.getDate() +"/"+dt.getMonth()+"/"+dt.getFullYear())

            // // definir estilo
            // updatedText.className = "repoCardText"
            // contributorText.className = "repoCardText"

            // // estilo, link e configuracoes do card
            // repo.className = "repoCard"
            // repo.href = repoInfo.html_url
            // repo.target = "blank"
            // repo.style.textDecoration = "none"

            // // adicionar elementos no card
            // repo.appendChild(contributorText)
            // repo.appendChild(nameText)
            // repo.appendChild(updatedText)

            // adicionar card na secao
            repoSection.appendChild(card)
        }


        async function getRepos (){
            // fazer get para pegar informaçao do repositorio
            var request = await fetch("https://api.github.com/users/jgdml/repos")
            
            await request.json().then(json => {
                
                // ver quantos contribuidores o repositorio tem
                json.forEach(async repoInfo => {
                    var requestCont = await fetch(repoInfo.url+"/contributors")

                    requestCont.json().then(
                        // criar os cards
                        contributor => createRepoCard(repoInfo, contributor.length)
                    )
                })
            })
        }

        function showLangImages(){
            // lista de logos
            var langs = [
                {
                    nome: "Dart logo",
                    logo_url:"https://avatars.githubusercontent.com/u/1609975?s=280&v=4",
                },
                {
                    nome: "Javascript logo",
                    logo_url: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Unofficial_JavaScript_logo_2.svg/1200px-Unofficial_JavaScript_logo_2.svg.png",
                },
                {
                    nome: "Python logo",
                    logo_url: "https://static.cloud-boxloja.com/lojas/wyfyg/produtos/cf02b27f-ab1b-4a50-ad17-4aa4e0368a94.jpg"
                },
                {
                    nome: "Java logo",
                    logo_url: "https://seeklogo.com/images/J/java-logo-7F8B35BAB3-seeklogo.com.png"
                }
            ]

            // identificar secao de logos
            var langList = document.getElementById("langList")

            // loop para colocar imagens
            langs.forEach(lang => {
                var langImg = document.createElement("img")
                langImg.src = lang.logo_url
                langImg.title = lang.nome
                langImg.alt = lang.nome
                langImg.className = "langImg"

                langList.appendChild(langImg)
            })
        }

        getRepos()

        showLangImages()


    </script>



</html>